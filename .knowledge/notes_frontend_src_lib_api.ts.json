{"is_source_file": true, "format": "TypeScript", "description": "This file defines a TypeScript API layer for a notes application, providing functions for authentication, managing notes, and local storage interaction with mock or real backend support.", "external_files": ["@/types"], "external_methods": [], "published": ["apiLogin", "apiSignup", "apiLogout", "getStoredUser", "apiListNotes", "apiCreateNote", "apiUpdateNote", "apiDeleteNote"], "classes": [], "methods": [{"name": "export async function apiLogin(creds: AuthCredentials): Promise<User> { apiLogin", "description": "Performs a mock login, generating a user object and storing it in localStorage if mock mode is enabled.", "scope": "", "scopeKind": ""}, {"name": "export async function apiSignup(creds: AuthCredentials): Promise<User> { apiSignup", "description": "Performs a mock signup, internally calling apiLogin.", "scope": "", "scopeKind": ""}, {"name": "export async function apiLogout(): Promise<void> { apiLogout", "description": "Logs out the user by removing user data from localStorage.", "scope": "", "scopeKind": ""}, {"name": "export function getStoredUser(): User | null { getStoredUser", "description": "Retrieves the stored user information from localStorage.", "scope": "", "scopeKind": ""}, {"name": "export async function apiListNotes(): Promise<Note[]> { apiListNotes", "description": "Returns a list of notes sorted by pinned status and last updated time, optionally fetching from a real backend (not yet implemented).", "scope": "", "scopeKind": ""}, {"name": "export async function apiCreateNote(): Promise<Note> { apiCreateNote", "description": "Creates a new note with default values, adds it to local storage, and returns it.", "scope": "", "scopeKind": ""}, {"name": "export async function apiUpdateNote(id: string, patch: Partial<Note>): Promise<Note> { apiUpdateNote", "description": "Updates an existing note identified by ID with a given patch, updating the timestamp.", "scope": "", "scopeKind": ""}, {"name": "export async function apiDeleteNote(id: string): Promise<void> { apiDeleteNote", "description": "Deletes a note by ID from local storage.", "scope": "", "scopeKind": ""}, {"name": "function delay(ms = 250) { delay", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function readNotes(): Note[] { readNotes", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function writeNotes(notes: Note[]) { writeNotes", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["delay", "localStorage.setItem", "localStorage.getItem", "localStorage.removeItem", "JSON.parse", "JSON.stringify", "readNotes", "writeNotes"], "search-terms": ["api layer", "notes API", "localStorage", "mock API", "auth credentials", "note management functions"], "state": 2, "file_id": 12, "knowledge_revision": 28, "git_revision": "", "ctags": [{"_type": "tag", "name": "API_BASE", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^const API_BASE = process.env.NEXT_PUBLIC_API_BASE_URL;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "STORAGE_KEYS", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^const STORAGE_KEYS = {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "USE_MOCK", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^const USE_MOCK = process.env.NEXT_PUBLIC_ENABLE_MOCK_API !== \"false\";$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "apiCreateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiCreateNote(): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiDeleteNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiDeleteNote(id: string): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiListNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiListNotes(): Promise<Note[]> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiLogin", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiLogin(creds: AuthCredentials): Promise<User> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiLogout", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiLogout(): Promise<void> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiSignup", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiSignup(creds: AuthCredentials): Promise<User> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "apiUpdateNote", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export async function apiUpdateNote(id: string, patch: Partial<Note>): Promise<Note> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "creds", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    name: creds.name ?? creds.email.split(\"@\")[0],$/", "language": "TypeScript", "kind": "constant", "scope": "apiLogin", "scopeKind": "function"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^function delay(ms = 250) {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getStoredUser", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^export function getStoredUser(): User | null {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    ...notes[idx],$/", "language": "TypeScript", "kind": "constant", "scope": "apiUpdateNote", "scopeKind": "function"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const idx = notes.findIndex((n) => n.id === id);$/", "language": "TypeScript", "kind": "constant", "scope": "apiUpdateNote", "scopeKind": "function"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    name: creds.name ?? creds.email.split(\"@\")[0],$/", "language": "TypeScript", "kind": "constant", "scope": "apiLogin", "scopeKind": "function"}, {"_type": "tag", "name": "note", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const note: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiCreateNote", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const notes = readNotes().filter((n) => n.id !== id);$/", "language": "TypeScript", "kind": "constant", "scope": "apiDeleteNote", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const notes = readNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "apiCreateNote", "scopeKind": "function"}, {"_type": "tag", "name": "notes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const notes = readNotes();$/", "language": "TypeScript", "kind": "constant", "scope": "apiUpdateNote", "scopeKind": "function"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const now = new Date().toISOString();$/", "language": "TypeScript", "kind": "constant", "scope": "apiCreateNote", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const raw = localStorage.getItem(STORAGE_KEYS.notes);$/", "language": "TypeScript", "kind": "constant", "scope": "readNotes", "scopeKind": "function"}, {"_type": "tag", "name": "raw", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const raw = localStorage.getItem(STORAGE_KEYS.user);$/", "language": "TypeScript", "kind": "constant", "scope": "getStoredUser", "scopeKind": "function"}, {"_type": "tag", "name": "readNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^function readNotes(): Note[] {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    tags: [],$/", "language": "TypeScript", "kind": "constant", "scope": "apiCreateNote", "scopeKind": "function"}, {"_type": "tag", "name": "updated", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const updated: Note = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiUpdateNote", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    updatedAt: new Date().toISOString(),$/", "language": "TypeScript", "kind": "constant", "scope": "apiUpdateNote", "scopeKind": "function"}, {"_type": "tag", "name": "updatedAt", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^    updatedAt: now,$/", "language": "TypeScript", "kind": "constant", "scope": "apiCreateNote", "scopeKind": "function"}, {"_type": "tag", "name": "user", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^  const user: User = {$/", "language": "TypeScript", "kind": "constant", "scope": "apiLogin", "scopeKind": "function"}, {"_type": "tag", "name": "writeNotes", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-11922-11940/notes_frontend/src/lib/api.ts", "pattern": "/^function writeNotes(notes: Note[]) {$/", "language": "TypeScript", "kind": "function"}], "hash": "917abc5d0699516b62e539695428ed61", "format-version": 4, "code-base-name": "notes_frontend", "filename": "notes_frontend/src/lib/api.ts", "revision_history": [{"28": ""}]}